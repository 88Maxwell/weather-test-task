(this["webpackJsonpwether-test-task"]=this["webpackJsonpwether-test-task"]||[]).push([[0],{171:function(e,t,a){e.exports={wrapper:"styles_wrapper__2blYz"}},202:function(e,t,a){e.exports=a(349)},204:function(e,t,a){},349:function(e,t,a){"use strict";a.r(t);a(203),a(204);var n=a(0),r=a.n(n),c=a(32),o=a.n(c),i=a(27),u=a(45),l=a(56),s=a(34),p=a(60),m=a(16),d=a(64),h=a(170),b=a.n(h),v=a(358),f=a(361),E=a(37),g=a(363),y=a(365),O=a(354),j=a(359),w=a(364),x=a(356),C=a(360),T=a(171),_=a.n(T),k=a(357);var S=function(e){var t=e.header,a=void 0===t?"header":t,n=e.description,c=void 0===n?"description,":n;return r.a.createElement(k.a.Item,{size:"large"},r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Header,null,a),r.a.createElement(k.a.Description,null,c)))},W=a(3),A=a.n(W);A.a.shape({lon:A.a.number,lat:A.a.number}),A.a.arrayOf(A.a.shape({id:A.a.number,main:A.a.string,description:A.a.string,icon:A.a.string})),A.a.string,A.a.shape({temp:A.a.number,pressure:A.a.number,humidity:A.a.number,temp_min:A.a.number,temp_max:A.a.number}),A.a.number,A.a.shape({speed:A.a.number,deg:A.a.number}),A.a.shape({all:A.a.number}),A.a.number,A.a.shape({type:A.a.number,id:A.a.number,message:A.a.number,sunrise:A.a.number,sunset:A.a.number,country:A.a.string}),A.a.number,A.a.string,A.a.number;var q=function(e){var t=e.wether,a=t.main,n=t.wind,c=t.name;return r.a.createElement(g.a,null,r.a.createElement(w.a,null,c),r.a.createElement(k.a,{divided:!0},r.a.createElement(S,{header:"temperature",description:"".concat(a.temp," \xb0 F")}),r.a.createElement(S,{header:"max temperature",description:"".concat(a.temp_max," \xb0 F")}),r.a.createElement(S,{header:"min temperature",description:"".concat(a.temp_min," \xb0 F")}),r.a.createElement(S,{header:"pressure",description:"".concat(a.pressure," atm")}),r.a.createElement(S,{header:"wind speed",description:"".concat(n.speed," m/s")}),r.a.createElement(S,{header:"wind degree",description:"".concat(n.deg," \xb0")})))},G={enableHighAccuracy:!1,timeout:1/0,maximumAge:0};function R(e){var t=e.data,a=e.state,n=e.LoadingComponent,c=e.ErrorComponent,o=void 0===c?null:c,i=e.DataComponent;return r.a.createElement(r.a.Fragment,null,t&&"loaded"===a&&i,!t&&"loading"===a&&n,"error"===a&&o)}R.propTypes={data:A.a.any,state:A.a.oneOf(["error","loaded","loading"]).isRequired,LoadingComponent:A.a.node.isRequired,ErrorComponent:A.a.node.isRequired,DataComponent:A.a.node.isRequired},R.defaultProps={data:null};var U=R,H=[{value:"Kyiv",text:"Kyiv"},{value:"Lviv",text:"Lviv"},{value:"Odesa",text:"Odesa"},{value:"Kharkiv",text:"Kharkiv"}];function L(e){var t=e.wetherState,a=e.wetherError,c=e.wether,o=e.onGetWether,i=e.onGoBack,u=e.onOpenWetherByCity,l=e.location,s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,a=Object(n.useState)(null),r=Object(d.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(null),u=Object(d.a)(i,2),l=u[0],s=u[1],p=function(e){var t=e.coords,a=e.timestamp;o({latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,timestamp:a})},m=function(e){s(e.message)};return Object(n.useEffect)((function(){if(navigator&&navigator.geolocation){var a=null;return e?a=navigator.geolocation.watchPosition(p,m,t):navigator.geolocation.getCurrentPosition(p,m,t),function(){return a&&navigator.geolocation.clearWatch(a)}}s("Geolocation is not supported")}),[t.enableHighAccuracy,t.timeout,t.maximumAge]),{position:c,error:l}}(!1).position,p=Object(n.useState)(null),m=Object(d.a)(p,2),h=m[0],T=m[1],k=Object(n.useState)(!0),S=Object(d.a)(k,2),W=S[0],A=S[1],R=l.search,L=!("/"===l.pathname&&""===R),P=b.a.parse(R.slice(1)).city;Object(n.useEffect)((function(){var e=s||{},t=e.latitude,a=e.longitude;o(P?{city:P}:{lat:t,lon:a})}),[o,R]);return r.a.createElement("main",null,r.a.createElement(v.a.Pushable,{className:_.a.wrapper},r.a.createElement(v.a,{as:f.a,animation:"overlay",icon:"labeled",inverted:!0,vertical:!0,visible:L,width:"thin"},r.a.createElement(f.a.Item,{onClick:i,labelPosition:"left"},r.a.createElement(E.a,{name:"arrow left"}),"Back")),r.a.createElement(v.a.Pusher,{basic:!0,as:g.a},r.a.createElement(y.a,{container:!0,centered:!0,verticalAlign:"middle"},r.a.createElement(y.a.Column,null,s?r.a.createElement(U,{data:c,state:t,LoadingComponent:r.a.createElement(O.a,{active:!0}),DataComponent:r.a.createElement(q,{wether:c}),ErrorComponent:r.a.createElement(j.a,{negative:!0},r.a.createElement(j.a.Header,null,"Something happened wrong!"),r.a.createElement("p",null,a))}):W&&r.a.createElement(j.a,{onDismiss:function(){return A(!1)},warning:!0},r.a.createElement(j.a.Header,null,"Please enable geolocation!")),r.a.createElement(g.a,null,r.a.createElement(w.a,null,"Watch wether by city"),r.a.createElement(x.a,{onChange:function(e,t){var a=t.value;return T(a)},options:H,placeholder:"Choose an option",selection:!0,value:h}),r.a.createElement(C.a,{disabled:!h,onClick:function(){return h&&u({city:h})}},"Watch")))))))}L.defaultProps={wetherState:null,wetherError:null,wether:null};var P=L,B=a(62),D=a(21),F=a(355),I={state:null,error:null,data:null};var K=function(e){var t,a=e.requestActionType,n=e.successActionType,r=e.failureActionType,c=Object(D.a)({},I);return Object(F.a)((t={},Object(B.a)(t,a,(function(e){return Object(D.a)(Object(D.a)({},e),{},{state:"loading",error:null})})),Object(B.a)(t,n,(function(e,t){var a=t.payload;return Object(D.a)(Object(D.a)({},e),{},{state:"loaded",data:a})})),Object(B.a)(t,r,(function(e,t){var a=t.payload;return Object(D.a)(Object(D.a)({},e),{},{state:"error",error:a})})),t),c)}({requestActionType:"GET_WETHER_REQUEST",successActionType:"GET_WETHER_SUCCESS",failureActionType:"GET_WETHER_FAIL"}),M=function(e){return e.wether.current},J=Object(p.a)(M,(function(e){return e.state})),z=Object(p.a)(M,(function(e){return e.error})),N=Object(p.a)(M,(function(e){return e.data})),Q=a(39),Y=a.n(Q),V=a(72),X=a(366),Z=a(186),$=a(187),ee=a(188),te=a.n(ee),ae={common:{storeLoggerEnabled:!1},openWeatherMap:{apiUrl:"https://api.openweathermap.org",prefix:"data/2.5",appid:"a57bae3a1ee62cc1d67d655a0eafcdbf"}},ne=new(function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.apiUrl,r=void 0===n?ae.apiUrl:n,c=a.prefix,o=void 0===c?"api/v1":c,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Z.a)(this,e),this.queryObject=i,this.prefix=o,this.apiUrl=r,this.token="",["get","post","patch","delete"].forEach((function(e){t[e]=function(){var a=Object(V.a)(Y.a.mark((function a(n,r,c){return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.request({method:e.toUpperCase(),body:r,url:n,params:c}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()}))}return Object($.a)(e,[{key:"request",value:function(){var e=Object(V.a)(Y.a.mark((function e(t){var a,n,r,c,o,i,u,l,s,p;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,r=t.body,c=t.params,i=o=void 0===c?{}:c,this.queryObject&&(i=Object(D.a)(Object(D.a)({},this.queryObject),o)),u="?".concat(te.a.stringify(i)),l="".concat(this.apiUrl,"/").concat(this.prefix).concat(a).concat(u),e.next=7,fetch(l,{method:n,withCredentials:!0,crossDomain:!0,body:"GET"!==n?JSON.stringify(r):void 0});case 7:return s=e.sent,e.next=10,s.json();case 10:if(200===+(p=e.sent).cod){e.next=13;break}throw p.message;case 13:return e.abrupt("return",p);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({apiUrl:ae.openWeatherMap.apiUrl,prefix:ae.openWeatherMap.prefix},{appid:ae.openWeatherMap.appid}),re=function(e){return ne.get("/weather",null,e)},ce=Object(X.a)("GET_WETHER_REQUEST"),oe=Object(X.a)("GET_WETHER_SUCCESS"),ie=Object(X.a)("GET_WETHER_FAIL");var ue=Object(p.b)({wetherState:J,wetherError:z,wether:N}),le=Object(s.e)(Object(u.c)(ue,(function(e){return{onGetWether:function(t){var a=t.lat,n=t.lon,r=t.city;return e(function(e){var t=e.lat,a=void 0===t?35:t,n=e.lon,r=void 0===n?139:n,c=e.city,o=void 0===c?"Kyiv":c;return function(){var e=Object(V.a)(Y.a.mark((function e(t){var n,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ce(n={lat:a,lon:r,q:o})),e.prev=2,e.next=5,re(n);case 5:return c=e.sent,t(oe(c)),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(2),t(ie(e.t0)),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}({lat:a,lon:n,city:r}))},onOpenWetherByCity:function(t){var a=t.city;return e(Object(m.e)("/?city=".concat(a)))},onGoBack:function(){return e(Object(m.c)())}}}))(P));function se(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",component:le}))}var pe=function(e){var t=e.history,a=e.store;return r.a.createElement(u.a,{store:a},r.a.createElement(l.a,{history:t},r.a.createElement(se,null)))},me=a(24),de=a(189),he=a(168),be=Object(me.c)({current:K});var ve=Object(i.a)(),fe=function(e){var t=e.history,n=e.isLogged,r=void 0===n||n,c=[de.a];if(t&&c.push(Object(he.a)(t)),r){var o=(0,a(348).createLogger)();c.push(o)}var i=function(e){var t=e.history;return Object(me.c)({router:Object(l.b)(t),wether:be})}({history:t});return Object(me.e)(i,void 0,Object(me.d)(me.a.apply(void 0,c)))}({history:ve});o.a.render(r.a.createElement(pe,{store:fe,history:ve}),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.13e80bce.chunk.js.map