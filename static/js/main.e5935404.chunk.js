(this["webpackJsonpweather-test-task"]=this["webpackJsonpweather-test-task"]||[]).push([[0],{195:function(e,t,a){e.exports=a(332)},197:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);a(196),a(197);var n=a(0),r=a.n(n),o=a(32),c=a.n(o),i=a(20),u=a(34),l=a(44),s=a(13),p=a(37),m=a(17),d=a(88),h=a.n(d),E=a(346),b=a(344),v=a(342),f=a(337),O=a(341),y=a(345),g=a(340);var w=function(e){var t=e.header,a=void 0===t?"header":t,n=e.description,o=void 0===n?"description,":n;return r.a.createElement(g.a.Item,{size:"large"},r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,a),r.a.createElement(g.a.Description,null,o)))},j=a(3),_=a.n(j);_.a.shape({lon:_.a.number,lat:_.a.number}),_.a.oneOfType([_.a.object,_.a.arrayOf(_.a.shape({id:_.a.number,main:_.a.string,description:_.a.string,icon:_.a.string}))]),_.a.string,_.a.shape({temp:_.a.number,pressure:_.a.number,humidity:_.a.number,temp_min:_.a.number,temp_max:_.a.number}),_.a.number,_.a.shape({speed:_.a.number,deg:_.a.number}),_.a.shape({all:_.a.number}),_.a.number,_.a.shape({type:_.a.number,id:_.a.number,message:_.a.number,sunrise:_.a.number,sunset:_.a.number,country:_.a.string}),_.a.number,_.a.string,_.a.number;var A=function(e){var t=e.weather,a=t.main,n=t.wind,o=t.name;return r.a.createElement(b.a,null,r.a.createElement(y.a,null,o),r.a.createElement(g.a,{divided:!0},r.a.createElement(w,{header:"temperature",description:"".concat(a.temp," \xb0 F")}),r.a.createElement(w,{header:"max temperature",description:"".concat(a.temp_max," \xb0 F")}),r.a.createElement(w,{header:"min temperature",description:"".concat(a.temp_min," \xb0 F")}),r.a.createElement(w,{header:"pressure",description:"".concat(a.pressure," atm")}),r.a.createElement(w,{header:"wind speed",description:"".concat(n.speed," m/s")}),r.a.createElement(w,{header:"wind degree",description:"".concat(n.deg," \xb0")})))};function T(e){var t=e.data,a=e.state,n=e.LoadingComponent,o=e.ErrorComponent,c=void 0===o?null:o,i=e.DataComponent;return r.a.createElement(r.a.Fragment,null,t&&"loaded"===a&&i,!t&&"loading"===a&&n,"error"===a&&c)}T.propTypes={data:_.a.any,state:_.a.oneOf(["error","loaded","loading"]),LoadingComponent:_.a.node.isRequired,ErrorComponent:_.a.node.isRequired,DataComponent:_.a.node.isRequired},T.defaultProps={data:null,state:null};var C=T,P=a(69),R={enableHighAccuracy:!1,timeout:1/0,maximumAge:0},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,a=Object(n.useState)(null),r=Object(P.a)(a,2),o=r[0],c=r[1],i=Object(n.useState)(null),u=Object(P.a)(i,2),l=u[0],s=u[1],p=function(e){var t=e.coords,a=e.timestamp;c({latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,timestamp:a})},m=function(e){s(e.message)};return Object(n.useEffect)((function(){if(navigator&&navigator.geolocation){var a=null;return e?a=navigator.geolocation.watchPosition(p,m,t):navigator.geolocation.getCurrentPosition(p,m,t),function(){return a&&navigator.geolocation.clearWatch(a)}}s("Geolocation is not supported")}),[t.enableHighAccuracy,t.timeout,t.maximumAge,t,e]),{position:o,error:l}};function x(e){var t=e.weatherState,a=e.weatherError,o=e.weather,c=e.onGetWeather,i=e.onGoBack,u=e.location,l=S(!1).position,s=u.search,p=h.a.parse(s.slice(1)).city;return Object(n.useEffect)((function(){var e=l||{},t=e.latitude,a=e.longitude;c(p?{city:p}:{lat:t,lon:a})}),[c,p,l]),r.a.createElement(E.a,{as:"main",verticalAlign:"middle",padded:!0,centered:!0},r.a.createElement(E.a.Row,null,r.a.createElement(b.a,{basic:!0},r.a.createElement(v.a,{labelPosition:"left",onClick:i,icon:"left chevron",content:"Back"}))),r.a.createElement(E.a.Row,null,r.a.createElement(C,{data:o,state:t,LoadingComponent:r.a.createElement(f.a,{active:!0}),DataComponent:r.a.createElement(A,{weather:o}),ErrorComponent:r.a.createElement(O.a,{negative:!0},r.a.createElement(O.a.Header,null,"Something happened wrong!"),r.a.createElement("p",null,a))})))}x.defaultProps={weatherState:null,weatherError:null,weather:null};var W=x,k=a(61),U=a(25),G=a(338),H={state:null,error:null,data:null};var D=function(e){var t,a=e.requestActionType,n=e.successActionType,r=e.failureActionType,o=Object(U.a)({},H);return Object(G.a)((t={},Object(k.a)(t,a,(function(e){return Object(U.a)(Object(U.a)({},e),{},{state:"loading",error:null})})),Object(k.a)(t,n,(function(e,t){var a=t.payload;return Object(U.a)(Object(U.a)({},e),{},{state:"loaded",data:a})})),Object(k.a)(t,r,(function(e,t){var a=t.payload;return Object(U.a)(Object(U.a)({},e),{},{state:"error",error:a})})),t),o)}({requestActionType:"GET_WEATHER_REQUEST",successActionType:"GET_WEATHER_SUCCESS",failureActionType:"GET_WEATHER_FAIL"}),I=function(e){return e.weather.current},L=Object(p.a)(I,(function(e){return e.state})),q=Object(p.a)(I,(function(e){return e.error})),F=Object(p.a)(I,(function(e){return e.data})),K=a(41),B=a.n(K),M=a(68),J=a(347),N=a(171),Q=a(172),X=a(173),z=a.n(X),V=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.apiUrl,r=void 0===n?"http://localhost:3000/":n,o=a.prefix,c=void 0===o?"api/v1":o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(N.a)(this,e),this.queryObject=i,this.prefix=c,this.apiUrl=r,this.token="",["get","post","patch","delete"].forEach((function(e){t[e]=function(){var a=Object(M.a)(B.a.mark((function a(n,r,o){return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.request({method:e.toUpperCase(),body:r,url:n,params:o}));case 1:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}()}))}return Object(Q.a)(e,[{key:"request",value:function(){var e=Object(M.a)(B.a.mark((function e(t){var a,n,r,o,c,i,u,l,s,p;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,r=t.body,o=t.params,i=c=void 0===o?{}:o,this.queryObject&&(i=Object(U.a)(Object(U.a)({},this.queryObject),c)),u="?".concat(z.a.stringify(i)),l="".concat(this.apiUrl,"/").concat(this.prefix).concat(a).concat(u),e.next=7,fetch(l,{method:n,withCredentials:!0,crossDomain:!0,body:"GET"!==n?JSON.stringify(r):void 0});case 7:return s=e.sent,e.next=10,s.json();case 10:if(200===+(p=e.sent).cod){e.next=13;break}throw p.message;case 13:return e.abrupt("return",p);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Y=Object({NODE_ENV:"production",PUBLIC_URL:"/weather-test-task",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://api.openweathermap.org",REACT_APP_PREFIX:"data/2.5",REACT_APP_APP_ID:"a57bae3a1ee62cc1d67d655a0eafcdbf"}),Z={common:{publicUrl:"/weather-test-task"},openWeatherMap:{apiUrl:Y.REACT_APP_API_URL,prefix:Y.REACT_APP_PREFIX,appid:Y.REACT_APP_APP_ID}},$=new V({apiUrl:Z.openWeatherMap.apiUrl,prefix:Z.openWeatherMap.prefix},{appid:Z.openWeatherMap.appid}),ee=function(e){return $.get("/weather",null,e)},te=Object(J.a)("GET_WEATHER_REQUEST"),ae=Object(J.a)("GET_WEATHER_SUCCESS"),ne=Object(J.a)("GET_WEATHER_FAIL");function re(e){var t=e.lat,a=void 0===t?35:t,n=e.lon,r=void 0===n?139:n,o=e.city,c=void 0===o?"Kyiv":o;return function(){var e=Object(M.a)(B.a.mark((function e(t){var n,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(te(n={lat:a,lon:r,q:c})),e.prev=2,e.next=5,ee(n);case 5:return o=e.sent,t(ae(o)),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(2),t(ne(e.t0)),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}var oe=Object(p.b)({weatherState:L,weatherError:q,weather:F}),ce=Object(s.f)(Object(u.c)(oe,(function(e){return{onGetWeather:function(t){var a=t.lat,n=t.lon,r=t.city;return e(re({lat:a,lon:n,city:r}))},onGoBack:function(){return e(Object(m.c)())}}}))(W)),ie=a(339),ue=a(182),le=[{value:"Kyiv",text:"Kyiv"},{value:"Lviv",text:"Lviv"},{value:"Odesa",text:"Odesa"},{value:"Kharkiv",text:"Kharkiv"}];function se(e){var t=e.weatherState,a=e.weatherError,o=e.weather,c=e.onGetWeather,i=e.location,u=S(!1).position,l=Object(n.useState)(!0),s=Object(P.a)(l,2),p=s[0],m=s[1],d=h.a.parse(i.search.slice(1)).city;Object(n.useEffect)((function(){var e=u||{},t=e.latitude,a=e.longitude;c(d?{city:d}:{lat:t,lon:a})}),[c,d,u]);return r.a.createElement(E.a,{as:"main",verticalAlign:"middle",padded:!0,centered:!0},r.a.createElement(E.a.Row,null,u?r.a.createElement(C,{data:o,state:t,LoadingComponent:r.a.createElement(f.a,{active:!0}),DataComponent:r.a.createElement(A,{weather:o}),ErrorComponent:r.a.createElement(O.a,{negative:!0},r.a.createElement(O.a.Header,null,"Something happened wrong!"),r.a.createElement("p",null,a))}):p&&r.a.createElement(O.a,{onDismiss:function(){return m(!1)},warning:!0},r.a.createElement(O.a.Header,null,"Please enable geolocation!"))),r.a.createElement(E.a.Row,null,r.a.createElement(b.a,null,r.a.createElement(y.a,null,"Watch weather by city"),r.a.createElement(ie.a,{text:"Choose an option"},r.a.createElement(ie.a.Menu,null,le.map((function(e){return r.a.createElement(ue.a,{key:e.text,component:ie.a.Item,to:"/weather?city=".concat(e.value)},e.text)})))))))}se.defaultProps={weatherState:null,weatherError:null,weather:null};var pe=se,me=Object(p.b)({weatherState:L,weatherError:q,weather:F}),de=Object(s.f)(Object(u.c)(me,(function(e){return{onGetWeather:function(t){var a=t.lat,n=t.lon,r=t.city;return e(re({lat:a,lon:n,city:r}))},onOpenWeatherByCity:function(t){var a=t.city;return e(Object(m.e)("/weather?city=".concat(a)))}}}))(pe));var he=function(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/weather",component:ce}),r.a.createElement(s.a,{path:"/",component:de}))};var Ee=function(e){var t=e.history,a=e.store;return r.a.createElement(u.a,{store:a},r.a.createElement(l.a,{history:t},r.a.createElement(he,null)))},be=a(27),ve=a(183),fe=a(165),Oe=Object(be.c)({current:D});var ye=Object(i.b)({hashType:"slash"}),ge=function(e){var t=e.history,a=[ve.a];t&&a.push(Object(fe.a)(t));var n=function(e){var t=e.history;return Object(be.c)({router:Object(l.b)(t),weather:Oe})}({history:t});return Object(be.e)(n,void 0,Object(be.d)(be.a.apply(void 0,a)))}({history:ye});c.a.render(r.a.createElement(Ee,{store:ge,history:ye}),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.e5935404.chunk.js.map